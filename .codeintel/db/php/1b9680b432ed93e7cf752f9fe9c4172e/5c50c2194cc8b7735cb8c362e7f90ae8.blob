<scope ilk="blob" lang="PHP" name="v2.php" src="/usr/share/pear/PEAR/PackageFile/Generator/v2.php"><import line="19" module="System.php" /><import line="20" module="XML/Util.php" /><import line="138" module="Archive/Tar.php" /><scope doc="This class converts a PEAR_PackageFile_v2 object into any output format.&#xA;&#xA;Supported output formats include array, XML string (using S. Schmidt&apos;s&#xA;XML_Serializer, slightly customized)&#xA;@category   pear&#xA;@package    PEAR&#xA;@author     Greg Beaver &lt;cellog@php.net&gt;&#xA;@author     Stephan Schmidt (original XML_Serializer code)&#xA;@copyright  1997-2009 The Authors&#xA;@license    http://opensource.org/licenses/bsd-license.php New BSD License&#xA;@version    Release: 1.10.12&#xA;@link       http://pear.php.net/package/PEAR&#xA;@since      Class available since Release 1.4.0a1" ilk="class" line="37" lineend="886" name="PEAR_PackageFile_Generator_v2"><variable citdl="array" doc="default options for the serialization&#xA;@access private&#xA;@var array $_defaultOptions" line="75" name="_defaultOptions" /><variable citdl="array" doc="options for the serialization&#xA;@access private&#xA;@var array $options" line="82" name="options" /><variable citdl="integer" doc="current tag depth&#xA;@var integer $_tagDepth" line="88" name="_tagDepth" /><variable citdl="string" doc="serilialized representation of the data&#xA;@var string $_serializedData" line="94" name="_serializedData" /><variable citdl="PEAR_PackageFile_v2" doc="@var PEAR_PackageFile_v2" line="98" name="_packagefile" /><scope attributes="__ctor__" doc="@param PEAR_PackageFile_v2" ilk="function" line="102" lineend="108" name="__construct" signature="__construct(&amp; $packagefile)"><variable ilk="argument" line="102" name="packagefile" /></scope><scope doc="&#xA;Returns string &#xA;" ilk="function" line="113" lineend="116" name="getPackagerVersion" returns="string" signature="string getPackagerVersion()" /><scope doc="@param PEAR_Packager&#xA;@param bool generate a .tgz or a .tar&#xA;@param string|null temporary directory to package in" ilk="function" line="123" lineend="127" name="toTgz" returns="this.toTgz2()" signature="toTgz(&amp; $packager, $compress = true, $where = null)"><variable ilk="argument" line="123" name="packager" /><variable default="true" ilk="argument" line="123" name="compress" /><variable default="null" ilk="argument" line="123" name="where" /><variable line="125" name="a" /></scope><scope doc="Package up both a package.xml and package2.xml for the same release&#xA;@param PEAR_Packager&#xA;@param PEAR_PackageFile_v1&#xA;@param bool generate a .tgz or a .tar&#xA;@param string|null temporary directory to package in" ilk="function" line="136" lineend="300" name="toTgz2" returns="PEAR.raiseError()" signature="toTgz2(&amp; $packager, &amp; $pf1, $compress = true, $where = null)"><variable ilk="argument" line="136" name="packager" /><variable ilk="argument" line="136" name="pf1" /><variable default="true" ilk="argument" line="136" name="compress" /><variable default="null" ilk="argument" line="136" name="where" /><variable citdl="Archive_Tar" line="271" name="tar" /><variable citdl="this.toPackageFile()" line="269" name="packagexml" /><variable citdl="orig[]" line="229" name="raw" /><variable citdl="str_replace()" line="229" name="tag" /><variable citdl="pkgdir" line="155" name="file" /><variable citdl="contents" line="186" name="contents" /><variable citdl="file" line="217" name="orig" /><variable citdl="task.startSession()" line="238" name="res" /><variable citdl="package" line="195" name="fname" /><variable citdl="this._packagefile.getPackage()" line="166" name="pkgver" /><variable citdl="this._packagefile.getPackageFile()" line="173" name="pkgfile" /><variable citdl="packageDir" line="201" name="tfile" /><variable citdl="pf1.getDefaultGenerator()" line="290" name="pfgen" /><variable citdl="fopen()" line="249" name="wp" /><variable citdl="tar.createModify()" line="274" name="ok" /><variable citdl="fileperms()" line="223" name="origperms" /><variable citdl="pf1" line="268" name="name" /><variable citdl="string" line="233" name="task" /><variable citdl="file" line="216" name="atts" /><variable citdl="dirname()" line="179" name="pkgdir" /><variable citdl="contents[]" line="194" name="package" /><variable citdl="int" line="184" name="i" /><variable citdl="getcwd()" line="167" name="dest_package" /><variable citdl="array()" line="183" name="filelist" /><variable citdl="compress" line="165" name="ext" /><variable citdl="pfgen.toPackageFile()" line="291" name="packagexml1" /><variable citdl="where" line="193" name="packageDir" /></scope><scope ilk="function" line="302" lineend="327" name="toPackageFile" returns="PEAR.raiseError()" signature="toPackageFile($where = null, $state = PEAR_VALIDATE_NORMAL, $name = &apos;package.xml&apos;)"><variable default="null" ilk="argument" line="302" name="where" /><variable default="PEAR_VALIDATE_NORMAL" ilk="argument" line="302" name="state" /><variable default="&apos;package.xml&apos;" ilk="argument" line="302" name="name" /><variable line="319" name="np" /><variable citdl="where" line="318" name="newpkgfile" /></scope><scope ilk="function" line="329" lineend="332" name="toV2" returns="this._packagefile" signature="&amp;toV2()" /><scope doc="&#xA;Return an XML document based on the package info (as returned&#xA;by the PEAR_Common::infoFrom* methods).&#xA;Returns string  - XML data&#xA;" ilk="function" line="340" lineend="406" name="toXml" returns="string" signature="string toXml($state = PEAR_VALIDATE_NORMAL, $options = array())"><variable default="PEAR_VALIDATE_NORMAL" ilk="argument" line="340" name="state" /><variable default="array()" ilk="argument" line="340" name="options" /><variable citdl="arr" line="372" name="release" /><variable citdl="this._packagefile.getArray()" line="354" name="arr" /><variable citdl="this._recursiveXmlFilelist()" line="389" name="use" /><variable citdl="arr" line="380" name="c" /><variable citdl="array_keys()[]" line="379" name="key" /></scope><scope ilk="function" line="409" lineend="428" name="_recursiveXmlFilelist" returns="dirs" signature="_recursiveXmlFilelist($list)"><variable ilk="argument" line="409" name="list" /><variable citdl="array()" line="411" name="dirs" /><variable citdl="list" line="415" name="attributes" /><variable citdl="list[]" line="418" name="a" /><variable citdl="list" line="413" name="file" /></scope><scope ilk="function" line="430" lineend="446" name="_addDir" signature="_addDir(&amp; $dirs, $dir, $file = null, $attributes = null, $tasks = null)"><variable ilk="argument" line="430" name="dirs" /><variable ilk="argument" line="430" name="dir" /><variable default="null" ilk="argument" line="430" name="file" /><variable default="null" ilk="argument" line="430" name="attributes" /><variable default="null" ilk="argument" line="430" name="tasks" /><variable citdl="array_shift()" line="441" name="curdir" /></scope><scope ilk="function" line="448" lineend="470" name="_formatDir" returns="array()" signature="_formatDir(&amp; $dirs)"><variable ilk="argument" line="448" name="dirs" /><variable citdl="array()" line="453" name="newdirs" /><variable citdl="dirs[]" line="463" name="contents" /><variable line="463" name="dir" /></scope><scope ilk="function" line="472" lineend="501" name="_deFormat" returns="array()" signature="_deFormat(&amp; $dirs)"><variable ilk="argument" line="472" name="dirs" /><variable line="493" name="name" /><variable citdl="contents[]" line="483" name="val" /><variable citdl="array()" line="480" name="newdir" /><variable citdl="array()" line="477" name="newdirs" /><variable line="483" name="tag" /><variable line="479" name="dir" /><variable citdl="dirs[]" line="493" name="file" /><variable citdl="dirs[]" line="479" name="contents" /></scope><scope doc="&#xA;reset all options to default options&#xA;Access   public&#xA;See      setOption(), XML_Unserializer()&#xA;" ilk="function" line="509" lineend="512" name="resetOptions" signature="resetOptions()" /><scope doc="&#xA;set an option&#xA;You can use this method if you do not want to set all options in the constructor&#xA;Access   public&#xA;See      resetOption(), XML_Serializer()&#xA;" ilk="function" line="522" lineend="525" name="setOption" signature="setOption($name, $value)"><variable ilk="argument" line="522" name="name" /><variable ilk="argument" line="522" name="value" /></scope><scope doc="&#xA;sets several options at once&#xA;You can use this method if you do not want to set all options in the constructor&#xA;Access   public&#xA;See      resetOption(), XML_Unserializer(), setOption()&#xA;" ilk="function" line="535" lineend="538" name="setOptions" signature="setOptions($options)"><variable ilk="argument" line="535" name="options" /></scope><scope doc="&#xA;serialize data&#xA;Access   public&#xA;&lt;mixed&gt; $data  - data to serialize&#xA;Returns boolean  - true on success, pear error on failure&#xA;" ilk="function" line="547" lineend="593" name="serialize" returns="boolean" signature="boolean serialize(mixed $data, $options = null)"><variable citdl="mixed" ilk="argument" line="547" name="data" /><variable default="null" ilk="argument" line="547" name="options" /><variable citdl="array()" line="580" name="atts" /><variable line="567" name="tagName" /><variable citdl="this.options" line="552" name="optionsBak" /><variable line="581" name="encoding" /></scope><variable line="568" name="tagName" /><scope doc="&#xA;get the result of the serialization&#xA;Access public&#xA;Returns string  - serialized XML&#xA;" ilk="function" line="601" lineend="607" name="getSerializedData" returns="string" signature="string getSerializedData()" /><scope doc="&#xA;serialize any value&#xA;This method checks for the type of the value and calls the appropriate method&#xA;Access private&#xA;&lt;mixed&gt; $value  - &#xA;&lt;string&gt; $tagName  - &#xA;&lt;array&gt; $attributes  - &#xA;Returns string &#xA;" ilk="function" line="620" lineend="635" name="_serializeValue" returns="string" signature="string _serializeValue(mixed $value, string $tagName = null, array $attributes = array())"><variable citdl="mixed" ilk="argument" line="620" name="value" /><variable citdl="string" default="null" ilk="argument" line="620" name="tagName" /><variable citdl="array" default="array()" ilk="argument" line="620" name="attributes" /><variable citdl="this._serializeArray()" line="623" name="xml" /><variable citdl="array()" line="631" name="tag" /></scope><scope doc="&#xA;serialize an array&#xA;Access   private&#xA;&lt;array&gt; $array  - array to serialize&#xA;&lt;string&gt; $tagName  - name of the root tag&#xA;&lt;array&gt; $attributes  - attributes for the root tag&#xA;Returns string  - $string serialized data&#xA;Uses     XML_Util::isValidName() to check, whether key has to be substituted&#xA;" ilk="function" line="647" lineend="828" name="_serializeArray" returns="string" signature="string _serializeArray(array &amp; $array, string $tagName = null, array $attributes = array())"><variable citdl="array" ilk="argument" line="647" name="array" /><variable citdl="string" default="null" ilk="argument" line="647" name="tagName" /><variable citdl="array" default="array()" ilk="argument" line="647" name="attributes" /><variable citdl="this.options" line="744" name="tmp" /><variable citdl="array()" line="762" name="atts" /><variable citdl="array" line="649" name="_content" /><variable citdl="array[]" line="679" name="val" /><variable citdl="array()" line="740" name="tag" /><variable citdl="array[]" line="726" name="value" /><variable citdl="this._curdir" line="693" name="savedir" /><variable citdl="get_class()" line="679" name="key" /><variable citdl="boolean" line="675" name="indexed" /><variable citdl="key" line="752" name="origKey" /><variable citdl="XML_Util.isValidName()" line="754" name="valid" /><variable citdl="string" line="687" name="string" /></scope><variable citdl="string" line="691" name="_curdir" /><scope doc="&#xA;create a tag from an array&#xA;this method awaits an array in the following format&#xA;array(&#xA;      &apos;qname&apos;        =&gt; $tagName,&#xA;      &apos;attributes&apos;   =&gt; array(),&#xA;      &apos;content&apos;      =&gt; $content,      // optional&#xA;      &apos;namespace&apos;    =&gt; $namespace     // optional&#xA;      &apos;namespaceUri&apos; =&gt; $namespaceUri  // optional&#xA;  )&#xA;Access   private&#xA;&lt;array&gt; $tag  - tag definition&#xA;&lt;boolean&gt; $replaceEntities  - whether to replace XML entities in content or not&#xA;Returns string  - $string XML tag&#xA;" ilk="function" line="846" lineend="885" name="_createXMLTag" returns="string" signature="string _createXMLTag(array $tag, boolean $replaceEntities = true)"><variable citdl="array" ilk="argument" line="846" name="tag" /><variable citdl="boolean" default="true" ilk="argument" line="846" name="replaceEntities" /><variable citdl="str_repeat()" line="850" name="indent" /><variable citdl="boolean" line="849" name="multiline" /></scope></scope></scope>